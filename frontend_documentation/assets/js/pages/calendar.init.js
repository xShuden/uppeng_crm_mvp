var start_date=document.getElementById("evant-start-date"),timepicker1=document.getElementById("timepicker1"),timepicker2=document.getElementById("timepicker2"),date_range=null,time_picker_1=null,time_picker_2=null,T_check=null;function flatPickrInit(){var e={enableTime:!0,noCalendar:!0,defaultDate:"09:00",dateFormat:"H:i"};flatpickr(start_date,{enableTime:!1,mode:"range",minDate:"today",dateFormat:"Y-m-d",onChange:function(e,t,n){1<t.split("to").length?document.getElementById("event-time").setAttribute("hidden",!0):(document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-time").removeAttribute("hidden"))}}),flatpickr(timepicker1,e),flatpickr(timepicker2,e)}function flatpicekrValueClear(){start_date.flatpickr().clear(),timepicker1.flatpickr().clear(),timepicker2.flatpickr().clear()}function eventClicked(){document.getElementById("form-event").classList.add("view-event"),document.getElementById("event-title").classList.replace("d-block","d-none"),document.getElementById("event-category").classList.replace("d-block","d-none"),document.getElementById("evant-start-date").parentNode.classList.add("d-none"),document.getElementById("evant-start-date").classList.replace("d-block","d-none"),document.getElementById("event-time").setAttribute("hidden",!0),document.getElementById("timepicker1").parentNode.classList.add("d-none"),document.getElementById("timepicker1").classList.replace("d-block","d-none"),document.getElementById("timepicker2").parentNode.classList.add("d-none"),document.getElementById("timepicker2").classList.replace("d-block","d-none"),document.getElementById("event-location").classList.replace("d-block","d-none"),document.getElementById("event-description").classList.replace("d-block","d-none"),document.getElementById("evant-start-date-tag").classList.replace("d-none","d-block"),document.getElementById("evant-timepicker1-tag").classList.replace("d-none","d-block"),document.getElementById("evant-timepicker2-tag").classList.replace("d-none","d-block"),document.getElementById("evant-location-tag").classList.replace("d-none","d-block"),document.getElementById("evant-description-tag").classList.replace("d-none","d-block"),document.getElementById("btn-save-event").setAttribute("hidden",!0)}function editEvent(e){var t=e.getAttribute("data-id");("new-event"==t?(document.getElementById("modal-title").innerHTML="",document.getElementById("modal-title").innerHTML="Add Event",document.getElementById("btn-save-event").innerHTML="Add Event",eventTyped):"edit-event"==t?(e.innerHTML="Cancel",e.setAttribute("data-id","cancel-event"),document.getElementById("btn-save-event").innerHTML="Update Event",e.removeAttribute("hidden"),eventTyped):(e.innerHTML="Edit",e.setAttribute("data-id","edit-event"),eventClicked))()}function eventTyped(e){document.getElementById("form-event").classList.remove("view-event"),document.getElementById("event-title").classList.replace("d-none","d-block"),document.getElementById("event-category").classList.replace("d-none","d-block"),document.getElementById("evant-start-date").parentNode.classList.remove("d-none"),document.getElementById("evant-start-date").classList.replace("d-none","d-block"),document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-location").classList.replace("d-none","d-block"),document.getElementById("event-description").classList.replace("d-none","d-block"),document.getElementById("evant-start-date-tag").classList.replace("d-block","d-none"),document.getElementById("evant-timepicker1-tag").classList.replace("d-block","d-none"),document.getElementById("evant-timepicker2-tag").classList.replace("d-block","d-none"),document.getElementById("evant-location-tag").classList.replace("d-block","d-none"),document.getElementById("evant-description-tag").classList.replace("d-block","d-none"),document.getElementById("btn-save-event").removeAttribute("hidden")}function upcomingEvent(e){e.sort(function(e,t){return new Date(e.start)-new Date(t.start)}),document.getElementById("upcoming-event-list").innerHTML=null,e.forEach(function(e){var t=e.title,n=e.end;"Invalid Date"==n&&(n=null);var n=(n=str_dt(e.start)===str_dt(e.end)?null:n)?" to "+str_dt(e.end):"",d=e.className.split("-"),a=e.description||"",i=tConvert(getTime(e.start)),l=(i==(l=tConvert(getTime(e.end)))&&(i="Full day event",l=null),l?" to "+l:"");u_event="<div class='card mb-3'>                        <div class='card-body'>                            <div class='d-flex mb-3'>                                <div class='flex-grow-1'><i class='mdi mdi-checkbox-blank-circle me-2 text-"+d[2]+"'></i><span class='fw-medium text-truncate'>"+str_dt(e.start)+n+"</span></div>                                <div class='flex-shrink-0'><small class='badge badge-soft-primary ms-auto'>"+i+l+"</small></div>                            </div>                            <h6 class='card-title fs-16'> "+t+"</h6>                            <p class='text-muted text-truncate-two-lines mb-0'> "+a+"</p>                        </div>                    </div>",document.getElementById("upcoming-event-list").innerHTML+=u_event})}function getTime(e){if(null!=(e=new Date(e)).getHours())return e.getHours()+":"+(e.getMinutes()?e.getMinutes():0)}function tConvert(e){var e=e.split(":"),t=e[0],e=e[1],n=12<=t?"PM":"AM";return(t=(t%=12)||12)+":"+(e<10?"0"+e:e)+" "+n}document.addEventListener("DOMContentLoaded",function(){flatPickrInit();var s=new bootstrap.Modal(document.getElementById("event-modal"),{keyboard:!1}),a=(document.getElementById("event-modal"),document.getElementById("modal-title")),i=document.getElementById("form-event"),m=null,u=document.getElementsByClassName("needs-validation"),m=null,e=new Date,t=e.getDate(),n=e.getMonth(),e=e.getFullYear(),g=(new FullCalendar.Draggable(document.getElementById("external-events"),{itemSelector:".external-event",eventData:function(e){return{title:e.innerText,start:new Date,className:e.getAttribute("data-class")}}}),[{id:153,title:"All Day Event",start:new Date(e,n,1),className:"bg-soft-primary",location:"San Francisco, US",allDay:!1,extendedProps:{department:"All Day Event"},description:"An all-day event is an event that lasts an entire day or longer"},{id:136,title:"Visit Online Course",start:new Date(e,n,t-5),end:new Date(e,n,t-2),allDay:!1,className:"bg-soft-warning",extendedProps:{department:"Long Event"},description:"Long Term Event means an incident that last longer than 12 hours."},{id:999,title:"Client Meeting with Alexis",start:new Date(e,n,t+22,9,55),end:new Date(e,n,t+24,15,30),allDay:!1,className:"bg-soft-danger",location:"California, US",extendedProps:{department:"Meeting with Alexis"},description:"A meeting is a gathering of two or more people that has been convened for the purpose of achieving a common goal through verbal interaction, such as sharing information or reaching agreement."},{id:991,title:"Repeating Event",start:new Date(e,n,t+4,14,0),end:new Date(e,n,t+9,17,35),allDay:!1,className:"bg-soft-primary",location:"Las Vegas, US",extendedProps:{department:"Repeating Event"},description:"A recurring or repeating event is simply any event that you will occur more than once on your calendar. "},{id:112,title:"Meeting With Designer",start:new Date(e,n,t,12,30),allDay:!1,className:"bg-soft-success",location:"Head Office, US",extendedProps:{department:"Meeting"},description:"Tell how to boost website traffic"},{id:113,title:"Weekly Strategy Planning",start:new Date(e,n,t+9,10,15),end:new Date(e,n,t+11,16,24),allDay:!1,className:"bg-soft-danger",location:"Head Office, US",extendedProps:{department:"Planning"},description:"Strategies for Creating Your Weekly Schedule"},{id:875,title:"Birthday Party",start:new Date(e,n,t+1,19,0),end:new Date(e,n,t+1,22,30),allDay:!1,className:"bg-soft-success",location:"Los Angeles, US",extendedProps:{department:"Birthday Party"},description:"Family slumber party Bring out the blankets and pillows and have a family slumber party! Play silly party games, share special snacks and wind down the fun with a special movie."},{id:783,title:"Click for Google",start:new Date(e,n,28),end:new Date(e,n,29),url:"http://google.com/",className:"bg-soft-dark"},{id:456,title:"Toner Project Discussion with Team",start:new Date(e,n,t+23,11,45),end:new Date(e,n,t+24,16,30),allDay:!1,className:"bg-soft-info",location:"Head Office, US",extendedProps:{department:"Discussion"},description:"Tell how to boost website traffic"}]),e=(document.getElementById("external-events"),document.getElementById("calendar"));function d(){document.getElementById("form-event").reset(),document.getElementById("btn-delete-event").setAttribute("hidden",!0),s.show(),i.classList.remove("was-validated"),i.reset(),m=null,a.innerText="Add Event",document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)}function l(){return 768<=window.innerWidth&&window.innerWidth<1200?"timeGridWeek":window.innerWidth<=768?"listMonth":"dayGridMonth"}var o=!0,v=new FullCalendar.Calendar(e,{timeZone:"local",editable:!0,droppable:!0,selectable:!0,navLinks:!0,initialView:l(),themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},windowResize:function(e){var t=l();v.changeView(t)},eventClick:function(e){document.getElementById("edit-event-btn").removeAttribute("hidden"),document.getElementById("btn-save-event").setAttribute("hidden",!0),document.getElementById("edit-event-btn").setAttribute("data-id","edit-event"),document.getElementById("edit-event-btn").innerHTML="Edit",eventClicked(),flatPickrInit(),flatpicekrValueClear(),s.show(),i.reset(),m=e.event,document.getElementById("modal-title").innerHTML="",document.getElementById("event-title").value=m.title,document.getElementById("event-category").value=m.classNames[0],document.getElementById("event-description").value=m.extendedProps.description,m.extendedProps.description?document.getElementById("evant-description-tag").innerHTML=m.extendedProps.description:document.getElementById("evant-description-tag").innerHTML="No Description",document.getElementById("event-location").value=m.extendedProps.location,m.extendedProps.description?document.getElementById("evant-location-tag").innerHTML=m.extendedProps.location:document.getElementById("evant-location-tag").innerHTML="No location";var t,e=m.start,n=m.end,d=(console.log("aaa",e,n),str_dt(e)!=str_dt(n)?str_dt(e)+" to "+str_dt(n):str_dt(e)),n=(flatpickr(start_date,{defaultDate:null===n?(n=e,n=new Date(n),e=""+(n.getMonth()+1),t=""+n.getDate(),[n.getFullYear(),e=e.length<2?"0"+e:e,t=t.length<2?"0"+t:t].join("-")):d,mode:"range",onChange:function(e,t,n){1<t.split("to").length?document.getElementById("event-time").setAttribute("hidden",!0):(document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-time").removeAttribute("hidden"))}}),document.getElementById("evant-start-date-tag").innerHTML=d,getTime(m.start)),e=getTime(m.end);n==e?(document.getElementById("event-time").setAttribute("hidden",!0),flatpickr(document.getElementById("timepicker1"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}),flatpickr(document.getElementById("timepicker2"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i"})):(document.getElementById("event-time").removeAttribute("hidden"),flatpickr(document.getElementById("timepicker1"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:n}),flatpickr(document.getElementById("timepicker2"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:e}),document.getElementById("evant-timepicker1-tag").innerHTML=tConvert(n),document.getElementById("evant-timepicker2-tag").innerHTML=tConvert(e)),a.innerText=m.title,document.getElementById("btn-delete-event").removeAttribute("hidden")},dateClick:function(e){d()},eventSources:[{url:"/assets/js/pages/plugins/event.init.json",method:"GET",extraParams:{custom_param1:"something",custom_param2:"somethingelse"},success:function(e){o&&(e.forEach(function(e){e={id:e.id,title:e.title,start:new Date(e.start),end:new Date(e.end),className:e.className,description:e.description};g.push(e)}),upcomingEvent(g),o=!1)}}],events:g});v.render(),i.addEventListener("submit",function(e){e.preventDefault();var t,n=document.getElementById("event-title").value,d=document.getElementById("event-category").value,a=document.getElementById("evant-start-date").value.split("to"),i=null,l=document.getElementById("event-location").value,o=document.getElementById("event-description").value,c=!0,r=(1<a.length?(e=new Date(a[1]),i=e=e.setTime(e.getTime()+828e5),a=new Date(a[0])):(e=a,r=document.getElementById("timepicker1").value.trim(),t=document.getElementById("timepicker2").value.trim(),a=new Date(a+"T"+r),i=new Date(e+"T"+t),c=!1),g.length+1);!1===u[0].checkValidity()?u[0].classList.add("was-validated"):(m?(m.setProp("id",r),m.setProp("title",n),m.setProp("classNames",[d]),m.setStart(a),m.setEnd(i),m.setAllDay(c),m.setProp("description",o),m.setExtendedProp("location",l),g.forEach(function(e){e.id===m.id-1&&(e.title=n,e.start=a,e.end=i,e.allDay=c,e.className=d,e.description=o,e.location=l)})):(e={id:r,title:n,start:a,end:i,allDay:c,className:d,description:o,location:l},v.addEvent(e),g.push(e)),s.hide(),upcomingEvent(g))}),document.getElementById("btn-delete-event").addEventListener("click",function(e){if(m){for(var t=0;t<g.length;t++)g[t].id==m.id&&(g.splice(t,1),t--);upcomingEvent(g),m.remove(),m=null,s.hide()}}),document.getElementById("btn-new-event").addEventListener("click",function(e){flatpicekrValueClear(),flatPickrInit(),d(),document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)})});var str_dt=function(e){var e=new Date(e),t=""+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=""+e.getDate(),e=e.getFullYear();return t.length<2&&(t="0"+t),[(n=n.length<2?"0"+n:n)+" "+t,e].join(",")};